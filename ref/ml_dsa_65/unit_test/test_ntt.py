import ctypes


def polynomial_to_c_array(polynomial):
    ba = bytearray()

    for coefficient in polynomial:
        ba += coefficient.to_bytes(4, "little", signed=True)

    char_array = ctypes.c_char * len(ba)
    return char_array.from_buffer(ba)


ntt_so = ctypes.PyDLL("./ntt.so")

polynomial = [
    245230,
    -429681,
    -35753,
    256940,
    138755,
    -82158,
    -453212,
    -296769,
    106884,
    -496329,
    -275542,
    350156,
    295061,
    462432,
    162727,
    219494,
    43263,
    -84315,
    -100731,
    5560,
    -38846,
    343612,
    76881,
    427547,
    165700,
    -361163,
    -18964,
    270770,
    -289948,
    -326181,
    -17540,
    -376674,
    -101359,
    324588,
    265493,
    -376942,
    -270029,
    -201717,
    -350446,
    222164,
    -314686,
    -60609,
    172509,
    -199265,
    391809,
    375196,
    333441,
    -433240,
    -28862,
    274251,
    -218805,
    400627,
    -408915,
    131269,
    -305167,
    78967,
    -487687,
    98675,
    -430105,
    293491,
    317484,
    -180888,
    -333359,
    -263010,
    258853,
    -84618,
    -350795,
    334736,
    -438451,
    479262,
    -265874,
    -115692,
    -521929,
    -220715,
    -456043,
    -24131,
    94695,
    473893,
    -503297,
    75679,
    -129421,
    83315,
    -248504,
    -64226,
    -24884,
    316438,
    264565,
    -248440,
    222228,
    -386736,
    89534,
    196079,
    -196063,
    434306,
    -388976,
    -29596,
    424028,
    290804,
    -348654,
    208245,
    394447,
    -105640,
    -522040,
    250479,
    -443666,
    -503110,
    299944,
    497539,
    -28052,
    30579,
    -332034,
    492009,
    -327080,
    -173581,
    -94157,
    -126088,
    388734,
    468785,
    -120589,
    -146970,
    -291234,
    337402,
    311007,
    -289990,
    506654,
    -431388,
    410292,
    -376624,
    422627,
    246536,
    -273872,
    443039,
    -265954,
    -250947,
    451185,
    -386654,
    -19185,
    -171927,
    -128698,
    -277965,
    142565,
    -229030,
    -470985,
    511916,
    -68612,
    272580,
    -293969,
    151888,
    -53429,
    -115171,
    234680,
    -482360,
    -399860,
    -268942,
    146734,
    -414798,
    502035,
    -157203,
    -328592,
    266628,
    95760,
    107840,
    354606,
    -367167,
    396086,
    -287062,
    57888,
    140152,
    442747,
    -217984,
    -69604,
    -136006,
    -56581,
    202803,
    -440282,
    -290558,
    -192319,
    -49121,
    -76454,
    426678,
    433484,
    -93094,
    244295,
    -195275,
    -262446,
    -169118,
    187824,
    -60480,
    -206921,
    -204671,
    -407794,
    -139194,
    -182819,
    133480,
    520760,
    -17757,
    -444106,
    -214471,
    457449,
    29697,
    -149734,
    -497293,
    -177518,
    -266611,
    -133962,
    -40139,
    9030,
    37706,
    300290,
    -370302,
    257446,
    -290991,
    353260,
    393727,
    -269498,
    249049,
    -166327,
    -354566,
    -309239,
    481747,
    82459,
    -425894,
    107583,
    10935,
    -498533,
    437188,
    -121594,
    -90890,
    -261475,
    -44165,
    394580,
    -392499,
    206781,
    -222053,
    -334528,
    -194081,
    -373973,
    -356982,
    -27220,
    -444980,
    449174,
    -391807,
    392057,
    -132521,
    -441664,
    -349459,
    -373059,
    -296519,
    274235,
    42417,
    47385,
    -104540,
    142532,
    246380,
    -515363,
    -422665,
]
polynomial = polynomial_to_c_array(polynomial)

ntt_so.ntt_wrapper(polynomial)

# TODO: Add the expected output here
